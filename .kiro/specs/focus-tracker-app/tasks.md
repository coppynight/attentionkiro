# 实施计划 (MVP优先)

## 第一阶段：MVP核心功能

- [x] 1. 项目初始化和基础架构
  - 创建iOS项目结构（仅iOS，暂不包含watchOS）
  - 设置Core Data基础数据模型（FocusSession, UserSettings）
  - 配置项目基本依赖和构建设置
  - _需求: 1.1, 2.1_

- [x] 2. 核心专注监测功能
- [x] 2.1 实现基础使用监测
  - 创建简化的屏幕状态监测机制
  - 实现基本的专注时段识别（30分钟未使用=专注）
  - 记录专注时段到Core Data
  - _需求: 1.1, 1.2, 1.4, 1.5_

- [x] 2.2 实现时间过滤逻辑
  - 添加基础的睡眠时间排除（固定晚11点-早7点）
  - 实现简单的专注时段验证
  - 创建FocusManager核心服务
  - _需求: 1.6, 1.7, 8.4, 8.5_

- [x] 2.3 实现后台任务监测
  - 配置后台任务权限（UIBackgroundModes和BGTaskScheduler）
  - 实现UIBackgroundTask短期后台任务管理
  - 集成BGProcessingTask长期后台处理
  - 添加应用状态转换监听和处理
  - 实现重复会话检测防止数据重复
  - 优化后台数据持久化逻辑
  - _需求: 1.9, 1.10, 1.11, 1.12, 9.1, 9.2, 9.3, 9.4, 9.5, 9.6, 9.7, 9.8_

- [x] 3. 基础用户界面
- [x] 3.1 创建主界面结构
  - 实现简单的TabView导航（首页+设置）
  - 创建基础SwiftUI视图组件
  - 设置基本的应用样式
  - _需求: 6.1, 6.5_

- [x] 3.2 实现专注概览界面
  - 显示今日总专注时间
  - 显示当前专注状态（是否在专注中）
  - 添加简单的专注目标进度显示
  - _需求: 2.1, 2.5, 7.1_

- [x] 3.3 实现基础设置界面
  - 创建专注目标设置（每日目标时间）
  - 添加睡眠时间设置选项
  - 实现基本的用户偏好保存
  - _需求: 7.1, 7.2, 8.1, 8.2_

- [x] 4. MVP测试和完善
- [x] 4.1 编写核心功能测试
  - 测试专注时段识别准确性
  - 验证数据存储和检索功能
  - 测试基础UI交互
  - 添加后台检测功能测试
  - _需求: 1.4, 1.5, 2.1, 9.1, 9.2, 9.3, 9.4, 9.5_

- [x] 4.2 MVP功能集成和优化
  - 连接所有核心功能模块
  - 实现完整的基础用户流程
  - 修复发现的问题和改进体验
  - _需求: 所有MVP需求_

## 第二阶段：增强功能

- [x] 5. 数据可视化和统计
- [x] 5.1 实现统计界面
  - 创建7天专注趋势简单图表
  - 显示专注时段历史列表
  - 添加个人最佳记录展示
  - _需求: 2.2, 2.3, 2.4_

- [x] 5.2 优化时间管理功能
  - 实现可配置的午休时间排除
  - 添加更灵活的睡眠时间设置
  - 支持跨时区时间调整
  - _需求: 8.3, 8.6, 8.7_

- [ ] 6. 通知系统
- [ ] 6.1 实现基础通知功能
  - 创建通知权限请求
  - 实现每日专注总结通知
  - 添加基本的鼓励通知
  - _需求: 4.1, 4.2, 4.3_

- [ ] 6.2 智能通知优化
  - 实现连续达标鼓励通知
  - 添加专注下降提醒
  - 优化通知内容个性化
  - _需求: 4.3, 4.4_

## 第三阶段：平台扩展

- [ ] 7. Apple Watch应用
- [ ] 7.1 创建watchOS基础应用
  - 设置watchOS项目结构
  - 实现Watch专注状态显示
  - 配置iOS-Watch数据同步
  - _需求: 3.1, 3.2, 3.3_

- [ ] 7.2 Watch功能完善
  - 实现历史数据查看
  - 添加快速操作功能
  - 优化Watch界面体验
  - _需求: 3.4, 3.5_

- [ ] 8. 桌面小组件
- [ ] 8.1 实现基础小组件
  - 创建WidgetKit Extension
  - 实现小尺寸专注进度小组件
  - 添加小组件数据更新机制
  - _需求: 5.1, 5.2_

- [ ] 8.2 小组件功能扩展
  - 实现中尺寸和大尺寸小组件
  - 添加小组件交互功能
  - 优化小组件显示效果
  - _需求: 5.3, 5.4, 5.5_

## 第四阶段：优化和完善

- [ ] 9. 性能和用户体验优化
- [ ] 9.1 后台任务优化
  - 实现高效的后台监测
  - 优化电池使用
  - 添加后台任务恢复机制
  - _需求: 1.1, 1.2, 1.3_

- [ ] 9.2 用户体验完善
  - 实现首次使用引导
  - 添加高级目标管理功能
  - 优化界面动画和交互
  - _需求: 6.2, 6.3, 6.4, 7.4, 7.5_

- [ ] 10. 最终测试和发布准备
- [ ] 10.1 全面测试
  - 执行完整功能测试
  - 进行性能和稳定性测试
  - 测试各平台兼容性
  - _需求: 所有需求_

- [ ] 10.2 发布准备
  - 优化应用性能和用户体验
  - 准备App Store发布材料
  - 进行最终质量检查
  - _需求: 6.1, 6.2, 6.3, 6.4, 6.5_